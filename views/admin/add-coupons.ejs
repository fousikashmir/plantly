<%- include('../partials/admin/header.ejs') %>
    
    <div class="clearfix"></div><!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Add New Coupon</title>
        <style>
            .error-message {
                color: red;
                font-size: 0.875em;
                display: none; 
            }
        </style>
    </head>
    <body>
        <div class="content-wrapper">
            <div class="container-fluid">
                <div class="row mt-3">
                    <div class="col-lg-6">
                        <div class="card" style="margin-top: 60px; margin-left: 60px;">
                            <div class="card-body">
                                <div class="card-title">ADD NEW COUPON</div>
                                <hr>
                                <form method="post" action="" onsubmit="return validateForm()">
                                    <div class="form-group">
                                        <label for="code">Code</label>
                                        <input type="text" name="code" class="form-control" id="code" placeholder="Enter coupon code" oninput="validateCode()">
                                        <span class="error-message" id="code-error" style="display: none; color: red;">Coupon code is required.</span>
                                    </div>

                                    <div class="form-group">
                                      <label for="discountType">Select discount Type</label>
                                      <select name="discountType" id="discountType" style="background-color:rgb(58,133,169);">
                                          <option style="background-color:rgb(58,133,169);">Fixed</option>
                                          <option style="background-color:rgb(58,133,169);">Percantge type</option>
                                      </select>
                                  </div>
  
  
    
                                    <div class="form-group">
                                        <label for="discountAmount">Discount amount</label>
                                        <input type="number" name="discountAmount" class="form-control" id="discountAmount" placeholder="Enter discount amount" oninput="validateDiscountAmount()">
                                        <span class="error-message" id="discountAmount-error" style="display: none; color: red;"></span>
                                    </div>
    
                                    <div class="form-group">
                                        <label for="amount">Max discount amount</label>
                                        <input type="number" name="amount" class="form-control" id="amount" placeholder="Enter Max discount amount" oninput="validateMaxDiscountAmount()">
                                        <span class="error-message" id="amount-error">Max discount amount must be a valid number greater than zero.</span>
                                    </div>
    
                                    <div class="form-group">
                                        <label for="cartamount">Max cart amount</label>
                                        <input type="number" name="cartamount" class="form-control" id="cartamount" placeholder="Enter Max cart amount" oninput="validateCartAmount()">
                                        <span class="error-message" id="cartamount-error">Max cart amount must be a valid number greater than zero.</span>
                                    </div>
    
                                    <div class="form-group">
                                        <label for="expirydate">Expiry date</label>
                                        <input type="date" name="expirydate" class="form-control" id="expirydate" placeholder="Enter Expiry date">
                                        <span class="error-message" id="expirydate-error">Expiry date must be in the future.</span>
                                    </div>
    
                                    <div class="form-group">
                                      <label for="couponcount">Max coupons</label>
                                      <input type="number" name="couponcount" class="form-control" id="couponcount" placeholder="Enter count of coupons" oninput="validateMaxCoupons()">
                                      <span class="error-message" id="couponcount-error">Max coupons must be a valid number greater than zero.</span>
                                  </div>
    
                                    <div class="form-group">
                                        <button type="submit" class="btn btn-light px-5"><i class="icon-lock"></i> ADD</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
        <script>

function validateForm() {
    validateCode();
    validateDiscountAmount();
    validateMaxDiscountAmount();
    validateCartAmount();
    validateMaxCoupons();

  
    const errors = document.querySelectorAll('.error-message');
    for (let error of errors) {
        if (error.style.display === 'block') {
            return false; 
        }
    }
    return true; 
}

          function validateCode(){
            const codeInput = document.querySelector('#code')
            const codeError = document.querySelector('#code-error')

            if(codeInput.value.trim() === ""){
              codeError.style.display = 'block'
            } else {
              codeError.style.display = 'none'
            }
          }

          function validateDiscountAmount(){
            const discountAmountInput = document.querySelector('#discountAmount')
            const discountAmountError = document.querySelector('#discountAmount-error')

            if(discountAmountInput.value === "" || Number(discountAmountInput.value) <=0){
              discountAmountError.textContent = "Discount amount must be a valid number greater than zero"
              discountAmountError.style.display = 'block'
            } else {
              discountAmountError.style.display = 'none'
            }
          }

         function validateMaxDiscountAmount(){
          const maxDiscountAmountInput = document.querySelector('#amount')
          const maxDiscountAmountError = document.querySelector('#amount-error')

          if (maxDiscountAmountInput.value === "" || Number(maxDiscountAmountInput.value) <=0){
            maxDiscountAmountError.style.display = 'block'
          } else {
            maxDiscountAmountError.style.display = 'none'
          }
         }

         function validateCartAmount(){
          const cartAmountInput = document.querySelector('#cartamount')
          const cartAmountError = document.querySelector('#cartamount-error')

          if(cartAmountInput.value === "" || Number(cartAmountInput.value) <=0){
            cartAmountError.style.display = 'block'
          } else{
            cartAmountError.style.display = 'none'
          }
         }

        

         function validateMaxCoupons() {
    const maxCouponsInput = document.querySelector('#couponcount');
    const maxCouponsError = document.querySelector('#couponcount-error');

    if (maxCouponsInput.value === "" || Number(maxCouponsInput.value) <= 0) {
        maxCouponsError.style.display = 'block';
    } else {
        maxCouponsError.style.display = 'none';
    }
}




          </script>